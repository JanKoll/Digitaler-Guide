{"version":3,"sources":["webpack:///src/app/home/home.page.html","webpack:///src/app/home/home-routing.module.ts","webpack:///src/app/home/home.module.ts","webpack:///src/app/home/home.page.scss","webpack:///src/app/home/home.page.ts"],"names":["routes","path","component","HomePageRoutingModule","imports","forChild","exports","HomePageModule","declarations","HomePage","platform","qrScanner","route","alertController","backButton","subscribeWithPriority","scanSub","document","getElementsByTagName","classList","toggle","destroy","create","header","message","buttons","text","role","cssClass","handler","openSettings","alert","present","prepare","then","status","authorized","show","scan","subscribe","textFound","routs","config","forEach","elements","push","includes","navigate","undefinedQrCode","err","JSON","stringify","denied","e","console","log","accessCamera","selector","template"],"mappings":"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","file":"home-home-module-es5.js","sourcesContent":["export default \"<ion-header [translucent]=\\\"true\\\">\\n  <ion-toolbar>\\n    <ion-title>\\n      QR-Code Scanner\\n    </ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n\\n  <div class=\\\"ion-padding\\\">\\n      <ion-button (click)=\\\"startScanning()\\\" expand=\\\"full\\\">QR-Code Scannen</ion-button>\\n  </div>\\n\\n</ion-content>\\n\\n<div class=\\\"ion-padding\\\" id=\\\"backButton\\\">\\n    <ion-button (click)=\\\"stopScanning()\\\" expand=\\\"full\\\">Abbrechen</ion-button>\\n</div>\\n\";","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomePage } from './home.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: HomePage,\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class HomePageRoutingModule {}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IonicModule } from '@ionic/angular';\nimport { FormsModule } from '@angular/forms';\nimport { HomePage } from './home.page';\n\nimport { HomePageRoutingModule } from './home-routing.module';\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    HomePageRoutingModule\n  ],\n  declarations: [HomePage]\n})\nexport class HomePageModule {}\n","export default \"#container {\\n  text-align: center;\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 50%;\\n  transform: translateY(-50%);\\n}\\n\\n#container strong {\\n  font-size: 20px;\\n  line-height: 26px;\\n}\\n\\n#container p {\\n  font-size: 16px;\\n  line-height: 22px;\\n  color: #8c8c8c;\\n  margin: 0;\\n}\\n\\n#container a {\\n  text-decoration: none;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvaG9tZS9ob21lLnBhZ2Uuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGtCQUFBO0VBRUEsa0JBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLFFBQUE7RUFDQSwyQkFBQTtBQUFGOztBQUdBO0VBQ0UsZUFBQTtFQUNBLGlCQUFBO0FBQUY7O0FBR0E7RUFDRSxlQUFBO0VBQ0EsaUJBQUE7RUFFQSxjQUFBO0VBRUEsU0FBQTtBQUZGOztBQUtBO0VBQ0UscUJBQUE7QUFGRiIsImZpbGUiOiJzcmMvYXBwL2hvbWUvaG9tZS5wYWdlLnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIjY29udGFpbmVyIHtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIHRvcDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoLTUwJSk7XG59XG5cbiNjb250YWluZXIgc3Ryb25nIHtcbiAgZm9udC1zaXplOiAyMHB4O1xuICBsaW5lLWhlaWdodDogMjZweDtcbn1cblxuI2NvbnRhaW5lciBwIHtcbiAgZm9udC1zaXplOiAxNnB4O1xuICBsaW5lLWhlaWdodDogMjJweDtcblxuICBjb2xvcjogIzhjOGM4YztcblxuICBtYXJnaW46IDA7XG59XG5cbiNjb250YWluZXIgYSB7XG4gIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbn0iXX0= */\";","import { Router } from '@angular/router';\nimport { Component } from '@angular/core';\nimport { QRScanner, QRScannerStatus } from '@ionic-native/qr-scanner/ngx';\nimport { Platform, AlertController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-home',\n  templateUrl: 'home.page.html',\n  styleUrls: ['home.page.scss'],\n})\nexport class HomePage {\n  scanSub: any;\n  qrText: string;\n\n  constructor(\n    public platform: Platform,\n    private qrScanner: QRScanner,\n    private route: Router,\n    public alertController: AlertController,\n  ) {\n    this.platform.backButton.subscribeWithPriority(0, () => {\n\n      // Android Physical Back Button???\n      // document.getElementsByTagName('body')[0].style.opacity = '1';\n      // Use Class to Toggle Backgound Visibility\n      this.scanSub = document.getElementsByTagName('body')[0].classList.toggle(\"qractive\");\n\n      this.qrScanner.destroy();\n\n    });\n  }\n\n  async accessCamera() {\n    const alert = await this.alertController.create({\n      // cssClass: 'my-custom-class',\n      header: 'Kamera deaktiviert',\n      message: 'Wenn du einen QR-Code Scannen möchtest, erlaube bitte den Kamera zugriff in den Einstellungen.',\n      buttons: [\n        {\n          text: 'Abbrechen',\n          role: 'cancel',\n          cssClass: 'secondary'\n        }, {\n          text: 'Einstellungen',\n          handler: () => {\n            this.qrScanner.openSettings()\n          }\n        }\n      ]\n    });\n\n    await alert.present();\n  }\n\n  async undefinedQrCode() {\n    const alert = await this.alertController.create({\n      // cssClass: 'my-custom-class',\n      header: 'Fehler',\n      message: 'Der QR-Code ist entweder nicht leserlich oder gehört nicht zur Tour.',\n      buttons: ['Okay']\n    });\n\n    await alert.present();\n  }\n\n  startScanning() {\n  // Optionally request the permission early\n    this.qrScanner.prepare().\n      then((status: QRScannerStatus) => {\n\n        if (status.authorized) {\n          this.qrScanner.show();\n          // this.scanSub = document.getElementsByTagName('body')[0].style.opacity = '.5';\n          // Use Class to Toggle Backgound Visibility\n          this.scanSub = document.getElementsByTagName('body')[0].classList.toggle(\"qractive\");\n\n          // debugger\n          this.scanSub = this.qrScanner.scan()\n            .subscribe((textFound: string) => {\n              // document.getElementsByTagName('body')[0].style.opacity = '1';\n              // Use Class to Toggle Backgound Visibility\n              this.scanSub = document.getElementsByTagName('body')[0].classList.toggle(\"qractive\");\n\n              // Route to Page with textFound var\n\n                // Array contains all possible routings\n                var routs = [];\n                this.route.config.forEach(elements => {\n                  routs.push(elements.path)\n                });\n\n                // Check if QR-Code is valid\n                if (routs.includes(textFound)) {\n                  this.route.navigate(['/' + textFound]);\n                  this.qrScanner.destroy();\n                } else {\n                  this.undefinedQrCode();\n                  this.qrScanner.destroy();\n                }\n            }, (err) => {\n              alert(JSON.stringify(err));\n            });\n\n        } else if (status.denied) {\n          // The video preview will remain black, and scanning is disabled. We can\n          // try to ask the user to change their mind, but we'll have to send them\n          // to their device settings with `QRScanner.openSettings()`.\n        } else {\n          // we didn't get permission, but we didn't get permanently denied. (On\n          // Android, a denial isn't permanent unless the user checks the \"Don't\n          // ask again\" box.) We can ask again at the next relevant opportunity.\n        }\n      })\n      .catch((e: any) => {\n        console.log('Error is', e);\n        this.accessCamera();\n      });\n  }\n\n  stopScanning() {\n    // document.getElementsByTagName('body')[0].style.opacity = '1';\n    // Use Class to Toggle Backgound Visibility\n    this.scanSub = document.getElementsByTagName('body')[0].classList.toggle(\"qractive\");\n    this.qrScanner.destroy();\n  }\n}\n"]}