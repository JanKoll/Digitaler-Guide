<ion-header class="ion-no-border">
  <ion-toolbar class="solid-primary">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="home" color="light"></ion-back-button>
    </ion-buttons>

    <ion-title>
      {{ title }}
    </ion-title>

    <ion-buttons slot="end">
      <ion-menu-button color="light"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="solid-primary" [fullscreen]="true" *ngIf="content">
  <div class="map-wrapper">
    <div class="coord"
      style="{{ setObjectLocation(item.coords) }}"
      *ngFor="let item of content.children; let i = index"
      (click)="showModal(i)"
    >
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 39.62 34.31">
        <defs>
          <style>
            .mapmarker{fill:#006c66;stroke-width:4px;}
            .mapmarker, .hex{stroke:#eee;stroke-miterlimit:10;}
            .textmarker{
              font-size: 1.5rem;
              fill: #eeeeee;
              font-family: Roboto;}
          </style>
        </defs>
        <g id="Layer_2" data-name="Layer 2">
          <g id="Hintergrund"><polygon class="mapmarker" points="28.56 2 11.06 2 2.31 17.16 11.06 32.31 28.56 32.31 37.31 17.16 28.56 2"/>
            <text class="textmarker" transform="translate(12.5 25.5)">{{ i + 1 }}</text>
          </g>
        </g>
      </svg>
    </div>

    <div class="location" style="{{ pointcoord }}"></div>

    <img src="data:image/png;base64,{{ content.map }}" />

  </div>

  {{ pointcoord }}

  <div class="story" *ngIf="content.hasstory == 'true'" (click)="route(content.id)">
    <svg id="Book_Layer_1" data-name="Book Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 55.41 55.88" style="width:60%; padding-top:0.6rem"><defs><style>.book{fill:#eee;}</style></defs><polygon class="book" points="7.85 0.56 27.7 7.18 47.55 0.56 47.55 40.26 27.7 46.88 7.85 40.26 7.85 0.56"/><polygon class="book" points="27.7 55.88 0 46.18 0 0 3.05 0 3.05 44.02 27.7 52.65 52.35 44.02 52.35 0 55.41 0 55.41 46.18 27.7 55.88"/></svg>
  </div>
  <div class="info" (click)="legend()">i</div>
  <div id="qropen" class="info" (click)="startScanning()"><img src="../assets/qr-icon.png" /></div>

</ion-content>

<div id="qrclose" (click)="stopScanning()">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
    <defs>
      <style>
        .closedark {
          fill: #eeeeee;
        }
      </style>
    </defs>
    <g id="Layer_2" data-name="Layer 2">
      <g id="Layer_1-2" data-name="Layer 1"><polygon class="closedark" points="100 9.83 90.17 0 50 40.17 9.83 0 0 9.83 40.17 50 0 90.17 9.83 100 50 59.83 90.17 100 100 90.17 59.83 50 100 9.83"/></g>
    </g>
  </svg>
</div>
