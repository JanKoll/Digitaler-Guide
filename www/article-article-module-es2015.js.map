{"version":3,"sources":["./src/app/article/article.page.ts","./src/app/article/article-routing.module.ts","./src/app/article/article.page.scss","./src/app/article/article.module.ts","./src/app/article/article.page.html"],"names":[],"mappings":"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","file":"article-article-module-es2015.js","sourcesContent":["import { Component } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport { SafeResourceUrl, DomSanitizer } from '@angular/platform-browser';\nimport { NavController } from '@ionic/angular';\n\nimport { HTTP } from '@ionic-native/http/ngx';\n\nimport { NativeStorage } from '@ionic-native/native-storage/ngx';\n\n@Component({\n  selector: 'app-article',\n  templateUrl: './article.page.html',\n  styleUrls: ['./article.page.scss'],\n})\nexport class ArticlePage {\n  content: any;\n  title: any;\n  template: any;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    public sanitizer: DomSanitizer,\n    public navCtrl: NavController,\n    private http: HTTP,\n    private nativeStorage: NativeStorage\n  ) {\n    // Check for Offline Mode\n    this.nativeStorage.getItem('isOffline')\n    .then(\n      data => {\n        this.localGET();\n      },\n      error => this.restGET()\n    );\n  }\n\n\n  // Get Local Data\n  localGET() {\n    this.activatedRoute.params.subscribe(params => {\n\n      let path = params['articleId'].split(\"/\");\n\n      this.nativeStorage.getItem('database')\n      .then(\n        data => {\n\n          // If page has Children (Is Locatoin)\n          if (path.length > 1) {\n            data.main.forEach(element => {\n              if (element.id == path[0]) {\n                element.children.forEach(child => {\n                  if (child.id == params.articleId) {\n                    this.content = child;\n                    this.template = 'article';\n                    this.title = child.title;\n                  }\n                });\n              }\n            });\n          } else {\n\n            data.meta.forEach(element => {\n              if (element.id == params.articleId) {\n                this.content = element;\n                this.template = 'default';\n                this.title = element.title;\n                console.log(element);\n\n              }\n            });\n          }\n        },\n        error => {\n          this.content = {\n            \"id\": \"error\",\n            \"title\": \"Fehler\",\n            \"template\": \"default\",\n            \"content\": [\n                {\n                    \"content\": {\n                        \"level\": \"h2\",\n                        \"text\": \"Fehler: Ups! Da ist etwas schiefgelaufen. Versuche bitte die Inhalte noch einmal herunterzuladen.\"\n                    }\n                }\n            ]\n          };\n          this.title = \"Fehler\";\n\n          console.log(error);\n        }\n      );\n\n    });\n\n  }\n\n  // Get Rest Data\n  restGET() {\n    this.activatedRoute.params.subscribe(params => {\n         let path = params['articleId'].split(\"/\");\n         let url = undefined;\n\n         if (path.length > 1) {\n           url = `http://api.jankoll.de/rest/article/${path[0]}/${path[path.length - 1]}`;\n           this.template = 'article';\n         } else {\n           url = `http://api.jankoll.de/rest/article/${path[path.length - 1]}`;\n           this.template = 'default';\n         }\n\n         // HTTP Request\n         this.http.useBasicAuth('mail@example.de', 'Raute123');\n\n         this.http.get(url, {}, {})\n         .then(data => {\n            this.content = JSON.parse(data.data); // data received by server\n            this.title = this.content.title;\n         })\n         .catch(error => {\n           console.log(error.status);\n           console.log(error.error); // error message as string\n           console.log(error.headers);\n         });\n    });\n  }\n\n  updateVideoUrl(id: string) {\n    // Appending an ID to a YouTube URL is safe.\n    // Always make sure to construct SafeValue objects as\n    // close as possible to the input data, so\n    // that it's easier to check if the value is safe.\n    let dangerousVideoUrl = 'https://www.youtube.com/embed/' + id.split('watch?v=')[id.split('watch?v=').length - 1] + '?rel=0&showinfo=0';\n    return this.sanitizer.bypassSecurityTrustResourceUrl(dangerousVideoUrl);\n  }\n\n  saveURL(type, id: string) {\n    let saveurl = 'data:' + type + ';base64,' + id;\n    return this.sanitizer.bypassSecurityTrustResourceUrl(saveurl);\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { ArticlePage } from './article.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: ArticlePage\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class ArticlePageRoutingModule {}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhcnRpY2xlLnBhZ2Uuc2NzcyJ9 */\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { ArticlePageRoutingModule } from './article-routing.module';\n\nimport { ArticlePage } from './article.page';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    ArticlePageRoutingModule\n  ],\n  declarations: [ArticlePage]\n})\nexport class ArticlePageModule {}\n","export default \"<ion-header class=\\\"ion-no-border\\\">\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n        <ion-back-button defaultHref=\\\"location\\\" color=\\\"light\\\"></ion-back-button>\\n    </ion-buttons>\\n\\n    <ion-title>\\n      {{ title }}\\n    </ion-title>\\n\\n    <ion-buttons slot=\\\"end\\\">\\n      <ion-menu-button color=\\\"light\\\"></ion-menu-button>\\n    </ion-buttons>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content [fullscreen]=\\\"true\\\">\\n  <div class=\\\"article\\\" *ngIf=\\\"content\\\">\\n\\n\\n    <!-- intro section -->\\n\\n    <div class=\\\"icon-header\\\" *ngIf=\\\"template == 'article'\\\">\\n      <div class=\\\"icon\\\">\\n        <img [src]=\\\"saveURL('image/png', content.icon)\\\" alt=\\\"{{ content.title }} Icon\\\">\\n      </div>\\n\\n      <p>Mehr erleben im</p>\\n      <h2>{{ content.title }}</h2>\\n    </div>\\n\\n    <ion-text color=\\\"light\\\" *ngIf=\\\"template == 'article'\\\">\\n      <p>{{ content.teasertext }}</p>\\n    </ion-text>\\n\\n\\n    <!-- content section -->\\n\\n    <div *ngFor=\\\"let item of content.content; index as i;\\\">\\n      <div [ngSwitch]=\\\"item.type\\\" class=\\\"section-wrap\\\">\\n\\n        <!-- Heading -->\\n        <div *ngSwitchCase=\\\"'heading'\\\">\\n          <div [ngSwitch]=\\\"item.content.level\\\">\\n            <h1 *ngSwitchCase=\\\"'h1'\\\">{{ item.content.text }}</h1>\\n            <h2 *ngSwitchCase=\\\"'h2'\\\">{{ item.content.text }}</h2>\\n            <h3 *ngSwitchCase=\\\"'h3'\\\">{{ item.content.text }}</h3>\\n            <h4 *ngSwitchCase=\\\"'h4'\\\">{{ item.content.text }}</h4>\\n            <h5 *ngSwitchCase=\\\"'h5'\\\">{{ item.content.text }}</h5>\\n            <h6 *ngSwitchCase=\\\"'h6'\\\">{{ item.content.text }}</h6>\\n          </div>\\n        </div>\\n\\n        <!-- Text -->\\n        <div *ngSwitchCase=\\\"'text'\\\" [innerHTML]=\\\"item.content.text\\\"></div>\\n\\n        <!-- List -->\\n        <div *ngSwitchCase=\\\"'list'\\\" [innerHTML]=\\\"item.content.text\\\"></div>\\n\\n        <!-- img -->\\n        <div *ngSwitchCase=\\\"'img'\\\">\\n          <ion-img src=\\\"data:image/jpeg;base64,{{ item.content.image }}\\\" alt=\\\"{{ item.content.alt }}\\\"></ion-img>\\n        </div>\\n\\n        <!-- slider -->\\n        <div *ngSwitchCase=\\\"'img-slider'\\\">\\n         <ion-slides pager=\\\"true\\\">\\n            <ion-slide *ngFor=\\\"let img of item.content.image\\\">\\n              <ion-img src=\\\"data:image/jpeg;base64,{{ img }}\\\" alt=\\\"{{ content.title }} Artikel Bild\\\"></ion-img>\\n            </ion-slide>\\n          </ion-slides>\\n        </div>\\n\\n        <!-- video -->\\n        <div *ngSwitchCase=\\\"'youtube'\\\">\\n          <iframe [src]=\\\"updateVideoUrl(item.content.url)\\\" allowfullscreen>Ups, da ist etwas schief gelaufen!</iframe>\\n        </div>\\n\\n        <!-- audio -->\\n        <div *ngSwitchCase=\\\"'audio'\\\">\\n          <audio controls>\\n            <source [src]=\\\"saveURL('audio/wav', item.content.audio)\\\">\\n\\n            Ups, da ist etwas schief gelaufen!\\n          </audio>\\n        </div>\\n\\n        <!-- default -->\\n        <div *ngSwitchDefault>\\n          <p>Error!</p>\\n          <div [innerHTML]=\\\"item.content\\\">\\n          </div>\\n        </div>\\n\\n      </div>\\n    </div>\\n\\n\\n  </div>\\n</ion-content>\\n\";"],"sourceRoot":"webpack:///"}